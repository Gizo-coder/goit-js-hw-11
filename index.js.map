{"version":3,"file":"index.js","sources":["../src/api.js","../src/render.js","../src/main.js"],"sourcesContent":["\r\n\r\nconst API_KEY = '52256115-ef245d0d17a91a1d5cb51d54b';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nexport function fetchImages(query) {\r\n\r\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true`;\r\n\r\n    return fetch(url)\r\n\r\n        .then(response => {\r\n            if (!response.ok) throw new Error(`Error: ${response.status}`);\r\n            return response.json();\r\n        });\r\n}","\r\nexport function createImageCards(images) {\r\n    return images\r\n\r\n        .map(img => {\r\n            return `<a href=\"${img.largeImageURL}\" class=\"card\">\r\n            \r\n            <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\r\n\r\n            <div class=\"stats\">\r\n                  <div class=\"stat\">\r\n                    <span>üëç</span>\r\n                    <p>${img.likes}</p>\r\n                  </div>\r\n                  <div class=\"stat\">\r\n                    <span>üëÅÔ∏è</span>\r\n                    <p>${img.views}</p>\r\n                  </div>\r\n                  <div class=\"stat\">\r\n                    <span>üí¨</span>\r\n                    <p>${img.comments}</p>\r\n                  </div>\r\n                  <div class=\"stat\">\r\n                    <span>‚¨áÔ∏è</span>\r\n                    <p>${img.downloads}</p>\r\n                  </div>\r\n            </div>                  \r\n            </a>`;\r\n        })\r\n        .join('');\r\n\r\n}","\r\nimport { fetchImages } from './api.js';\r\nimport { createImageCards } from './render.js';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport './style.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst form = document.querySelector('.search_form');\r\nconst gallery = document.querySelector('.gallery');\r\nconst loader = document.querySelector('.loader');\r\nlet lightbox = new SimpleLightbox('.gallery a');\r\n\r\nform.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n    const query = e.target.elements.searchQuery.value.trim();\r\n    if (!query) return;\r\n\r\n    gallery.innerHTML = '';\r\n    loader.classList.remove('is-hidden');\r\n\r\n    fetchImages(query)\r\n        .then(data => {\r\n            if (!data.hits.length) {\r\n                iziToast.info({\r\n                    title: 'No results',\r\n                    message: 'Sorry, no images found.',\r\n                    position: 'topRight',\r\n                \r\n                });\r\n\r\n                loader.classList.add('is-hidden');\r\n\r\n                return;\r\n            }\r\n\r\n            gallery.innerHTML = createImageCards(data.hits);\r\n            lightbox.refresh();\r\n\r\n            const images = gallery.querySelectorAll('img');\r\n            let loadedCount = 0;\r\n\r\n            images.forEach(img => {\r\n                img.addEventListener('load', () => {\r\n                    loadedCount++;\r\n                    if (loadedCount === images.length) {\r\n                     loader.classList.add('is-hidden');\r\n                    }\r\n                });\r\n\r\n                img.addEventListener('error', () => {\r\n                    loadedCount++;\r\n                    if (loadedCount === images.length) {\r\n                     loader.classList.add('is-hidden');\r\n                    }\r\n                });\r\n             });\r\n\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n        \r\n            iziToast.error({\r\n                title: 'Error',\r\n                message: err.message,\r\n                position: 'topRight',\r\n            });\r\n        })\r\n        \r\n});\r\n\r\n\r\n"],"names":["API_KEY","BASE_URL","fetchImages","query","url","response","createImageCards","images","img","form","gallery","loader","lightbox","SimpleLightbox","e","data","iziToast","loadedCount","err"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,SAASC,EAAYC,EAAO,CAE/B,MAAMC,EAAM,GAAGH,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,2DAErE,OAAO,MAAMC,CAAG,EAEX,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAM,UAAUA,EAAS,MAAM,EAAE,EAC7D,OAAOA,EAAS,MACpB,CAAC,CACT,CCdO,SAASC,EAAiBC,EAAQ,CACrC,OAAOA,EAEF,IAAIC,GACM,YAAYA,EAAI,aAAa;AAAA;AAAA,wBAExBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,yBAKjCA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,yBAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,yBAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,yBAIZA,EAAI,SAAS;AAAA;AAAA;AAAA,iBAI7B,EACA,KAAK,EAAE,CAEhB,CCtBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE9CJ,EAAK,iBAAiB,SAAUK,GAAK,CACjCA,EAAE,eAAc,EAChB,MAAMX,EAAQW,EAAE,OAAO,SAAS,YAAY,MAAM,OAC7CX,IAELO,EAAQ,UAAY,GACpBC,EAAO,UAAU,OAAO,WAAW,EAEnCT,EAAYC,CAAK,EACZ,KAAKY,GAAQ,CACV,GAAI,CAACA,EAAK,KAAK,OAAQ,CACnBC,EAAS,KAAK,CACV,MAAO,aACP,QAAS,0BACT,SAAU,UAE9B,CAAiB,EAEDL,EAAO,UAAU,IAAI,WAAW,EAEhC,MACJ,CAEAD,EAAQ,UAAYJ,EAAiBS,EAAK,IAAI,EAC9CH,EAAS,QAAO,EAEhB,MAAML,EAASG,EAAQ,iBAAiB,KAAK,EAC7C,IAAIO,EAAc,EAElBV,EAAO,QAAQC,GAAO,CAClBA,EAAI,iBAAiB,OAAQ,IAAM,CAC/BS,IACIA,IAAgBV,EAAO,QAC1BI,EAAO,UAAU,IAAI,WAAW,CAErC,CAAC,EAEDH,EAAI,iBAAiB,QAAS,IAAM,CAChCS,IACIA,IAAgBV,EAAO,QAC1BI,EAAO,UAAU,IAAI,WAAW,CAErC,CAAC,CACJ,CAAC,CAIN,CAAC,EACA,MAAMO,GAAO,CAEVF,EAAS,MAAM,CACX,MAAO,QACP,QAASE,EAAI,QACb,SAAU,UAC1B,CAAa,CACL,CAAC,EAET,CAAC"}